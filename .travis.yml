language: objective-c

addons:
  apt:
    packages:
    - gettext
    - libunwind8
    - libicu52

env:
 global:
  - EnableNuGetPackageRestore=true 

before_install:
 - wget "https://download.mono-project.com/archive/4.6.1/macos-10-universal/MonoFramework-MDK-4.6.1.5.macos10.xamarin.universal.pkg"
 - sudo installer -pkg "MonoFramework-MDK-4.6.1.5.macos10.xamarin.universal.pkg" -target /
 - export PATH=/Library/Frameworks/Mono.framework/Versions/Current/bin/:$PATH

 - sudo sh -c 'echo "deb [arch=amd64] https://apt-mo.trafficmanager.net/repos/dotnet/ trusty main" > /etc/apt/sources.list.d/dotnetdev.list'
 - sudo apt-key adv --keyserver apt-mo.trafficmanager.net --recv-keys 417A0893
 - sudo apt-get update
 - sudo apt-get -y install dotnet-dev-1.0.0-preview2-1-003177

script:
 - make test

 - dotnet restore
 - dotnet test src/ByteSizeLib.Tests/
