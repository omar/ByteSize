language: objective-c

env:
 global:
  - EnableNuGetPackageRestore=true 

before_install:
 - wget "https://download.mono-project.com/archive/4.6.1/macos-10-universal/MonoFramework-MDK-4.6.1.5.macos10.xamarin.universal.pkg"
 - sudo installer -pkg "MonoFramework-MDK-4.6.1.5.macos10.xamarin.universal.pkg" -target /
 - export PATH=/Library/Frameworks/Mono.framework/Versions/Current/bin/:$PATH

 - /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
 - brew update
 - brew install openssl
 - mkdir -p /usr/local/lib
 - ln -s /usr/local/opt/openssl/lib/libcrypto.1.0.0.dylib /usr/local/lib/
 - ln -s /usr/local/opt/openssl/lib/libssl.1.0.0.dylib /usr/local/lib/
 - wget "https://download.microsoft.com/download/1/4/1/141760B3-805B-4583-B17C-8C5BC5A876AB/Installers/dotnet-dev-osx-x64.1.0.0-preview2-1-003177.pkg"
 - sudo installer -pkg "dotnet-dev-osx-x64.1.0.0-preview2-1-003177.pkg" -target /

script:
 - make test

 - dotnet restore
 - dotnet test src/ByteSizeLib.Tests/
